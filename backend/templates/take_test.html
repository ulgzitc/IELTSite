{% extends 'base.html' %}
{% load static %}


{% block content %}
    <section id="view-exam" class="view-section hidden flex flex-col h-[calc(100vh-64px)] bg-gray-100 fixed w-full top-16 left-0 z-40">
        <!-- Exam Header -->
        <div class="bg-white border-b border-gray-300 px-6 py-2 flex justify-between items-center shadow-sm h-14 flex-shrink-0">
            <div class="flex items-center gap-4">
                <span class="text-sm text-gray-500 font-mono">Candidate: <strong>John Doe</strong></span>
                <span class="text-sm text-gray-500 font-mono">ID: <strong>123456</strong></span>
            </div>
            
            <div class="flex items-center gap-6">
                <div class="flex items-center gap-2">
                    <i class="fa-regular fa-clock text-gray-600"></i>
                    <span id="exam-timer" class="text-xl font-bold text-gray-800 font-mono">59:59</span>
                </div>
                <button class="text-xs text-blue-600 underline">Hide Time</button>
                <button class="bg-red-600 hover:bg-red-700 text-white text-xs px-3 py-1 rounded font-bold uppercase tracking-wider" onclick="app.testEngine.finishTest()">Submit Test</button>
            </div>
        </div>
        <!-- Exam Content: Split Screen -->
        <div class="flex flex-grow overflow-hidden relative">
            
            <!-- Left Panel: Passage (Scrollable) -->
            <div class="w-1/2 p-8 overflow-y-auto test-scroll border-r border-gray-300 bg-white">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">The History of Tea</h2>
                <p class="mb-4 leading-relaxed text-gray-700">
                    The story of tea begins in China. According to legend, in 2737 BC, the Chinese emperor Shen Nung was sitting beneath a tree while his servant boiled drinking water, when some leaves from the tree blew into the water. Shen Nung, a renowned herbalist, decided to try the infusion that his servant had accidentally created. The tree was a Camellia sinensis, and the resulting drink was what we now call tea.
                </p>
                <p class="mb-4 leading-relaxed text-gray-700">
                    Tea containers have been found in tombs dating from the Han dynasty (206 BC – 220 AD) but it was under the Tang dynasty (618–906 AD), that tea became firmly established as the national drink of China. It became such a favourite that during the late eighth century a writer called Lu Yu wrote the first book entirely about tea, the Ch'a Ching, or Tea Classic. It was shortly after this that tea was first introduced to Japan, by Japanese Buddhist monks who had travelled to China to study.
                </p>
                <p class="mb-4 leading-relaxed text-gray-700">
                    <strong>Tea in Europe</strong><br>
                    Tea was totally unknown to Europeans until the sixteenth century. It is likely that the Portuguese, who were the first Europeans to establish trade with China, were also the first to drink tea. However, it was the Dutch who were the first to import tea commercially, with the first consignment arriving in Holland around 1610. 
                </p>
                <p class="mb-4 leading-relaxed text-gray-700">
                    In Britain, the marriage of Charles II to Catherine of Braganza proved to be a turning point. She was a Portuguese princess and a tea addict, and her love of the drink made it fashionable at court and in wealthy circles. In this period, the East India Company began to import tea into Britain, its first order being placed in 1664 for 100lbs of China tea to be shipped from Java.
                </p>
                <!-- Placeholder for length -->
                <div class="h-32"></div>
            </div>
            <!-- Right Panel: Questions (Scrollable) -->
            <div class="w-1/2 p-8 overflow-y-auto test-scroll bg-gray-50">
                
                <!-- Question Group 1 -->
                <div class="mb-8">
                    <div class="bg-blue-50 border-l-4 border-blue-600 p-4 mb-4">
                        <h3 class="font-bold text-blue-800">Questions 1-3</h3>
                        <p class="text-sm text-blue-700">Choose the correct letter, A, B, C or D.</p>
                    </div>
                    <!-- Question 1 -->
                    <div class="mb-6" id="q-container-1">
                        <p class="font-medium mb-2 text-gray-800"><span class="inline-block w-6 h-6 bg-gray-800 text-white text-center rounded text-sm mr-2 leading-6">1</span> According to legend, who discovered tea?</p>
                        <div class="space-y-2 ml-8">
                            <label class="flex items-center space-x-3 cursor-pointer p-2 hover:bg-white rounded border border-transparent hover:border-gray-200 transition">
                                <input type="radio" name="q1" value="A" class="h-4 w-4 text-blue-600 focus:ring-blue-500" onchange="app.testEngine.markAnswered(1)">
                                <span class="text-gray-700">A servant of the Emperor</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer p-2 hover:bg-white rounded border border-transparent hover:border-gray-200 transition">
                                <input type="radio" name="q1" value="B" class="h-4 w-4 text-blue-600 focus:ring-blue-500" onchange="app.testEngine.markAnswered(1)">
                                <span class="text-gray-700">Emperor Shen Nung</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer p-2 hover:bg-white rounded border border-transparent hover:border-gray-200 transition">
                                <input type="radio" name="q1" value="C" class="h-4 w-4 text-blue-600 focus:ring-blue-500" onchange="app.testEngine.markAnswered(1)">
                                <span class="text-gray-700">Lu Yu</span>
                            </label>
                        </div>
                    </div>
                    <!-- Question 2 -->
                    <div class="mb-6" id="q-container-2">
                        <p class="font-medium mb-2 text-gray-800"><span class="inline-block w-6 h-6 bg-gray-800 text-white text-center rounded text-sm mr-2 leading-6">2</span> When did tea become the national drink of China?</p>
                        <div class="space-y-2 ml-8">
                            <label class="flex items-center space-x-3 cursor-pointer p-2 hover:bg-white rounded border border-transparent hover:border-gray-200 transition">
                                <input type="radio" name="q2" value="A" class="h-4 w-4 text-blue-600 focus:ring-blue-500" onchange="app.testEngine.markAnswered(2)">
                                <span class="text-gray-700">Han Dynasty</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer p-2 hover:bg-white rounded border border-transparent hover:border-gray-200 transition">
                                <input type="radio" name="q2" value="B" class="h-4 w-4 text-blue-600 focus:ring-blue-500" onchange="app.testEngine.markAnswered(2)">
                                <span class="text-gray-700">Tang Dynasty</span>
                            </label>
                            <label class="flex items-center space-x-3 cursor-pointer p-2 hover:bg-white rounded border border-transparent hover:border-gray-200 transition">
                                <input type="radio" name="q2" value="C" class="h-4 w-4 text-blue-600 focus:ring-blue-500" onchange="app.testEngine.markAnswered(2)">
                                <span class="text-gray-700">In 2737 BC</span>
                            </label>
                        </div>
                    </div>
                </div>
                <!-- Question Group 2 -->
                <div class="mb-8">
                    <div class="bg-blue-50 border-l-4 border-blue-600 p-4 mb-4">
                        <h3 class="font-bold text-blue-800">Questions 4-6</h3>
                        <p class="text-sm text-blue-700">Complete the sentences below. Write <strong>NO MORE THAN TWO WORDS</strong> for each answer.</p>
                    </div>
                    <!-- Question 4 -->
                    <div class="mb-4" id="q-container-4">
                        <div class="flex items-baseline gap-3">
                            <span class="inline-block w-6 h-6 bg-gray-800 text-white text-center rounded text-sm leading-6 flex-shrink-0">4</span>
                            <p class="text-gray-800 leading-7">
                                The first Europeans to establish trade with China were the 
                                <input type="text" class="border-b-2 border-gray-400 bg-gray-100 px-2 py-0 focus:outline-none focus:border-blue-600 focus:bg-white w-40 text-blue-700 font-semibold" oninput="app.testEngine.markAnswered(4)">.
                            </p>
                        </div>
                    </div>
                    <!-- Question 5 -->
                    <div class="mb-4" id="q-container-5">
                        <div class="flex items-baseline gap-3">
                            <span class="inline-block w-6 h-6 bg-gray-800 text-white text-center rounded text-sm leading-6 flex-shrink-0">5</span>
                            <p class="text-gray-800 leading-7">
                                Catherine of Braganza was a Portuguese princess and a known 
                                <input type="text" class="border-b-2 border-gray-400 bg-gray-100 px-2 py-0 focus:outline-none focus:border-blue-600 focus:bg-white w-40 text-blue-700 font-semibold" oninput="app.testEngine.markAnswered(5)">.
                            </p>
                        </div>
                    </div>
                </div>
                 <!-- Placeholder for scroll -->
                 <div class="h-20"></div>
            </div>
        </div>
        <!-- Exam Footer: Question Palette -->
        <div class="bg-gray-800 h-16 flex-shrink-0 flex items-center justify-between px-4 text-white">
            <div class="flex items-center gap-2 overflow-x-auto w-full max-w-4xl scrollbar-hide">
                <span class="text-xs uppercase font-semibold text-gray-400 mr-2">Questions:</span>
                <!-- JS will generate buttons here, showing manual example -->
                <button class="q-btn w-8 h-8 rounded border border-gray-500 text-sm hover:bg-gray-700 flex items-center justify-center transition" onclick="app.testEngine.scrollToQuestion(1)" id="nav-btn-1">1</button>
                <button class="q-btn w-8 h-8 rounded border border-gray-500 text-sm hover:bg-gray-700 flex items-center justify-center transition" onclick="app.testEngine.scrollToQuestion(2)" id="nav-btn-2">2</button>
                <button class="q-btn w-8 h-8 rounded border border-gray-500 text-sm hover:bg-gray-700 flex items-center justify-center transition" onclick="app.testEngine.scrollToQuestion(3)" id="nav-btn-3">3</button>
                <button class="q-btn w-8 h-8 rounded border border-gray-500 text-sm hover:bg-gray-700 flex items-center justify-center transition" onclick="app.testEngine.scrollToQuestion(4)" id="nav-btn-4">4</button>
                <button class="q-btn w-8 h-8 rounded border border-gray-500 text-sm hover:bg-gray-700 flex items-center justify-center transition" onclick="app.testEngine.scrollToQuestion(5)" id="nav-btn-5">5</button>
            </div>
            
            <div class="flex items-center gap-2 flex-shrink-0">
                 <button class="text-gray-300 hover:text-white px-3"><i class="fa-solid fa-chevron-left"></i></button>
                 <button class="text-gray-300 hover:text-white px-3"><i class="fa-solid fa-chevron-right"></i></button>
            </div>
        </div>
    </section>
{% endblock %}